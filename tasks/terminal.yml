---
vars:
  packages:
  - neovim
  - zsh
  - tmux

- name: Install zsh
  ansible.builtin.dnf:
    name: "zsh"
    state: present
  become: yes

- name: Set zsh as the default shell
  become: yes
  command: chsh -s /bin/zsh {{ lookup('env' 'USER') }}
  register: zsh_for_user
  failed_when: zsh_for_user.rc >= 1
  changed_when: zsh_for_user.rc == 0

